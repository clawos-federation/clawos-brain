# 脚本更新说明 - 方案B（深度清理 + 直接删除）

**更新时间**: 2026-02-10 19:54
**更新内容**: 临时文件改为直接删除，不再归档

---

## 🔄 主要更新

### 1. 清理策略变更

| 项目 | 之前 | 现在 |
|------|------|------|
| **第四次开物革命文件** | 归档到 archive/ | ✅ 直接删除 |
| **临时脚本**（*.py, *.txt, *.csv） | 归档到 archive/ | ✅ 直接删除 |
| **系统缓存** | 清理 | ✅ 清理（不变） |
| **历史文件** | 删除 | ✅ 删除（不变） |

---

## ⚠️ 重要提醒

### 删除的文件（不可恢复！）

**第四次开物革命相关文件**（10个）：
- 第四次开物革命_专业出版版.pdf
- 第四次开物革命_增强版.pdf
- 第四次开物革命_完整版.pdf
- 第四次开物革命_完整版_bookmarks.txt
- 第四次开物革命_temp.html
- 第四次开物革命PDF生成报告.md
- 第四次开物革命出版标准规范.md
- 第四次开物革命：智能、生命与文明的飞跃_完整规范版.md
- 第四次开物革命：智能、生命与文明的飞跃_最终版.md

**临时脚本**：
- migrations.py (39K)
- models.py (26K)
- requirements.txt (1.3K)
- pdf_publication_generator.py (22K)
- professional_pdf_generator.py (26K)
- simple_pdf_generator.py (7.8K)
- 以及其他 *.txt, *.csv 文件

---

## 📋 执行前检查清单

1. ⚠️ **第四次开物革命文件还需要吗？**
   - [ ] 是 → 不执行脚本，手动备份这些文件
   - [ ] 否 → 继续执行

2. ⚠️ **临时脚本中有有用的代码吗？**
   - [ ] 有 → 手动移动到 `~/scripts/`，然后执行脚本
   - [ ] 没有 → 继续执行

3. ✅ **已备份重要文件？**
   - [ ] 是 → 继续执行

---

## 🚀 执行脚本

```bash
cd /Users/henry/openclaw-system/workspace
./home_cleanup.sh
```

---

## 📊 脚本特性更新

### 脚本安全特性

1. ✅ **显示清理计划** - 执行前显示所有内容
2. ✅ **确认机制** - 需要输入 `yes` 才能继续
3. ✅ **日志记录** - 所有操作都记录到日志文件
4. ✅ **彩色输出** - 不同级别用不同颜色显示
5. ✅ **错误处理** - 遇到错误立即停止
6. ⚠️ **直接删除** - 临时文件直接删除，不归档！
7. ✅ **空目录检查** - 空目录才删除

---

## 🔄 恢复方法

### 如果误删除了重要文件

**注意**: 此脚本直接删除文件，不归档！请仔细确认后再执行！

如果误删除了重要文件，无法通过脚本恢复，只能：
1. 检查日志文件，查看删除了哪些文件
2. 从 Time Machine 或其他备份恢复

```bash
# 查看删除日志
cat ~/.openclaw/clawos/workspace/cleanup_log_*.txt
```

---

## 📄 更新的文件

| 文件 | 状态 |
|------|------|
| **home_cleanup.sh** | ✅ 已更新（直接删除模式）|
| **HOME_CLEANUP_SCRIPT_GUIDE.md** | ✅ 已更新 |
| **HOME_CLEANUP_RECOMMENDATIONS.md** | ✅ 已更新 |

---

## 🎯 预期效果

### 清理前

```
.claude          376M
.cursor           872M
.cache           9.9G
根目录文件:       ~100个
```

### 清理后

```
.claude          376M
.cursor           872M
.cache           0B (重建后)
根目录文件:       ~50个 (减少一半)
总空间占用:       ~1.2GB
节省空间:        ~10GB
```

---

## ⚡ 快速参考

### 清理步骤
1. 显示清理计划
2. 询问确认（输入 `yes`）
3. 删除 .cache/
4. 删除 .DS_Store 文件
5. 删除历史文件
6. **删除第四次开物革命文件** ⚠️
7. **删除临时脚本** ⚠️
8. 删除旧工具
9. 删除空目录
10. 生成报告

---

**更新完成时间**: 2026-02-10 19:54
**脚本版本**: 2.0（直接删除模式）
**状态**: ✅ 已更新，等待用户执行
